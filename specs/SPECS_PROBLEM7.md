# [우테코5기 프리코스]문제7번 문제풀이
## 개요
본 문서는 [우테코 5기 프리코스 1주차 문제 7번의 기능 요구사항 기술서](https://github.com/DevJay1024/java-onboarding/blob/main/docs/PROBLEM7.md)를 분석하여 기능의 구현방법을 상세히 작성한 문서입니다.


## 목차
* [개요](#개요)
* [목차](#목차)
* [요구사항 및 제한사항 분석](#요구사항-및-제한사항-분석)
    + [요구사항](#요구사항)
    + [최초 입력](#최초-입력)
    + [최종 결과](#최종-결과)
    + [세부 기능 소요](#세부-기능-소요)
    + [예외처리가 필요한 경우](#예외처리가-필요한-경우)
* [기능 구현방법 설계](#기능-구현방법-설계)
    + [메소드](#메소드)
    + [테스트 케이스](#테스트-케이스)


## 요구사항 및 제한사항 분석
### 요구사항
친구 추천 규칙에 따라 점수가 가장 높은 순으로 정렬하여 최대 5명을 return 하도록 solution 메서드 완성
- 친구 추천 규칙
    - 사용자와 함께 아는 친구의 수 = 10점
    - 사용자의 타임 라인에 방문한 횟수 = 1점

### 최초 입력
- 모든 유저id 공통사항
    - 자료형 : String
    - 길이: 1 이상 30 이하
- 사용자 아이디 user
    - 설명: 유저id
- List<List<String>> friends
    - 설명: 친구 관계 정보
    - 리스트의 길이: 1 이상 10,000 이하
    - 원소인 리스트의 길이: 2 (유저id A, 유저id B : A와 B가 친구라는 의미)
- List<String> visitors
    - 설명: 사용자 타임 라인 방문 기록
    - 길이: 0 이상 10,000 이하
    - 원소: 유저id

### 최종 결과
- List<String>
    - 친구 추천 규칙에 따라 점수가 가장 높은 순으로 정렬된 아이디 최대 5개

### 세부 기능 소요
1. List<List<String>>의 친구 관계를 토대로 각 아이디별 친구 리스트 생성 기능
2. 리스트에 아이디가 있으면 그 아이디에 특정 점수를 추가하는 기능
   1. `친구의 친구 리스트`이 경우에는 `10점`
   2. `사용자 타임 라인 방문 기록 리스트`인 경우에는 `1점`
3. 기능1을 실행한 결과로 기능2를 실행시키고, 아이디별 점수를 비교해 친구 추천 대상을 골라내는 기능
   1. 본인 또는 이미 친구인 아이디는 제외한다.

### 예외처리가 필요한 경우
1. visitors에 본인이 있는 경우
2. 친구 정보에 동일한 사람이 친구라고 되어있는 경우 [아이디 A, 아이디 A]
3. ~~이름이 동일한 유저가 있는 경우~~ (현재 제한사항으로는 이를 해결할 방법이 없어 보임)


## 기능 구현방법 설계
### 메소드
1. `Map<String, List<String>> makeFriendListMap(List<List<String>>)`
   1. 설명: 기능1(List<List<String>>의 친구 관계를 토대로 각 아이디별 친구 리스트 생성)
   2. 입력: List<List<String>> : 친구 관계 정보
   3. 동작:
      1. 각 유저id의 친구 목록을 관리할 Map<String, List<String>>을 만든다.
      2. 친구 관계 정보를 토대로 각 유저id의 친구목록을 추가한다.
         1. 친구 관계인 유저1과 유저2를 받아서 동일 인물인 경우에는 다음 관계로 넘어간다.
         2. Map에 저장된 유저1의 친구목록에 유저2를 넣고, 유저2의 친구목록에 유저1에 넣는다.
         3. Map에 해당 유저의 친구목록 자체가 없는 경우에는 (해당 유저id, 친구 목록 객체)를 저장해준다.
      3. Map<String, List<String>>을 반환한다.
   4. 결과: Map<String, List<String>> : (유저id, 해당 유저의 친구 목록)이 담긴 Map
2. `void addScore(List<String>, Map<String, int>, int, int)`
    1. 설명: 기능2(리스트에 아이디가 있으면 그 아이디에 특정 점수를 추가)
       1. `친구의 친구 리스트`이 경우에는 `10점`
       2. `사용자 타임 라인 방문 기록 리스트`인 경우에는 `1점`
    2. 입력:
        1. List<String>: 유저id 리스트 (친구 목록 리스트, 사용자 타임 라인 방문 기록 리스트)
        2. Map<String, int>: 유저id별 점수 목록
        3. int: 발견되는 아이디에 추가할 점수
    3. 동작:
       1. 리스트에 있는 유저id마다 반복
          1. Map에 담긴 유저id의 점수에 해당되는 추가점수를 부여한다.
          2. Map에 유저id에 따른 점수판이 없는 경우에는, 점수판을 추가하고 해당되는 점수를 기입한다.
       2. Map 반환
    4. 결과: void (반환 없음)
3. `List<String> solution(String, List<List<String>>, List<String>)`
    1. 설명: 기능#3(기능1을 실행한 결과로 기능2를 실행시키고, 자기 자신과 이미 친구인 유저를 제외하고, 아이디별 점수를 비교해 친구 추천 대상 선별)
    2. 입력:
       1. String: 친구 추천받을 유저id
       2. List<List<String>>: 친구 관계 정보
       3. List<String>: 사용자 타임 라인 방문 기록
    3. 동작
       1. 유저id마다 점수를 기록할 Map<String, Integer>를 생성한다.
       2. 메소드#1을 통해 친구의 친구 리스트 Map을 받아서 친구의 친구 리스트에 대해 메소드#2(친구 추천 점수를 계산)를 실행한다.
       3. 사용자 타임 라인 방문 기록을 토대로 메소드#2(친구 추천 점수를 계산)을 실행한다.
       4. 점수판에 친구 추천받을 유저와 그 유저와 이미 친구인 아이디를 제거한다.
       5. 점수의 오름차순으로 정렬해서, 최대 5명을 앞에서부터 뽑는다.
    4. 결과: List<String> (친구 추천 목록)

### 테스트 케이스
- 친구 관계 정보와 방문 기록, 둘 다 활용해서 점수를 매기는 경우

| user   | friends                                                                                                                         | visitors                                      | result                    |
|--------|---------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|---------------------------|
| "mrko" | [ ["donut", "andole"], ["donut", "jun"], ["donut", "mrko"], ["shakevan", "andole"], ["shakevan", "jun"], ["shakevan", "mrko"] ] | ["bedi", "bedi", "donut", "bedi", "shakevan"] | ["andole", "jun", "bedi"] |


- 친구의 친구 목록으로 추천받을 수 없고, 방문 기록으로 점수를 매기는 경우

| user    | friends                                                      | visitors                                      | result               |
|---------|--------------------------------------------------------------|-----------------------------------------------|----------------------|
| "donut" | [ ["donut", "andole"], ["donut", "jun"], ["donut", "mrko"] ] | ["bedi", "bedi", "donut", "bedi", "shakevan"] | ["bedi", "shakevan"] |
- 방문 기록은 없고, 친구의 친구로 추천받는 경우

| user   | friends                                                                                                                         | visitors | result            |
|--------|---------------------------------------------------------------------------------------------------------------------------------|----------|-------------------|
| "mrko" | [ ["donut", "andole"], ["donut", "jun"], ["donut", "mrko"], ["shakevan", "andole"], ["shakevan", "jun"], ["shakevan", "mrko"] ] | [ ]      | ["andole", "jun"] |

- (예외처리 필요) 본인이 본인 방문자 목록에 있는 경우

| user   | friends                                                                                                                         | visitors                                             | result                    |
|--------|---------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|---------------------------|
| "mrko" | [ ["donut", "andole"], ["donut", "jun"], ["donut", "mrko"], ["shakevan", "andole"], ["shakevan", "jun"], ["shakevan", "mrko"] ] | ["mrko", bedi", "bedi", "donut", "bedi", "shakevan"] | ["andole", "jun", "bedi"] |
